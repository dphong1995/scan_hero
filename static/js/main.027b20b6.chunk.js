(this["webpackJsonpscan-hero-react"]=this["webpackJsonpscan-hero-react"]||[]).push([[0],{147:function(e,r,t){},224:function(e,r,t){"use strict";t.r(r);var c=t(0),n=t.n(c),a=t(35),i=t.n(a),o=(t(147),t(115)),s=t.n(o),u=t(119),l=t(131),m=t(120),p=(t(148),t(227)),h=t(52),j=t(138),b=t(228),d=t(136),f=t(229),O=t(85),x=t(230),g=t(27),P=function(e){return"https://market.heroesempires.com/market/".concat(e)},v=function(e){var r=e.scanHeroParams,t=e.onRemoveClick,n=r.heroPrice,a=r.interval,i=r.heroName,o=Object(c.useState)([]),j=Object(m.a)(o,2),b=j[0],d=j[1],f=Object(c.useRef)(),v=Object(c.useCallback)(Object(l.a)(s.a.mark((function e(){var r,t,c,a,o,l,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://marketplace-api.heroesempires.com/sale-items?class&desc=false&listedOnMarket=true&minPrice&orderBy=price&page=1&race&search=".concat(i,"&size=21&tier&maxPrice=").concat(n),{headers:{accept:"application/json, text/plain, */*","accept-language":"en-US,en;q=0.9","cache-control":"no-cache",pragma:"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-site","sec-gpc":"1"},referrer:"https://market.heroesempires.com/",referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"omit"});case 2:return r=e.sent,e.next=5,r.json();case 5:if(t=e.sent,c=t.data.items,a=c[0],c.forEach((function(e){var r=e.sale.price;(!a||r<a.sale.price)&&(a=e)})),a&&!(a.sale.price>n)){e.next=11;break}return e.abrupt("return");case 11:if(l=(o=a).id,m=o.sale.price,!Object(O.find)(b,["id",l])){e.next=15;break}return e.abrupt("return");case 15:new Notification("ScanHero",{body:"".concat(i,": ").concat(m)}).onclick=function(){window.open(P(l))},d(Object(O.uniqBy)([].concat(Object(u.a)(b),[a]),"id"));case 18:case"end":return e.stop()}}),e)}))),[b,d,i,n]),k=Object(c.useMemo)((function(){return[{key:"id",dataIndex:"id",title:"ID",render:function(e){return Object(g.jsx)("a",{target:"_blank",href:P(e),rel:"noreferrer",children:e})}},{key:"price",dataIndex:["sale","price"],title:"Price"}]}),[]);return Object(c.useEffect)((function(){return f.current&&clearInterval(f.current),f.current=window.setInterval(v,a),function(){clearInterval(f.current)}}),[v,a]),Object(g.jsx)(p.a,{rowKey:"id",title:function(){return Object(g.jsxs)("strong",{children:[i,": ",n," ",Object(g.jsx)(h.a,{danger:!0,onClick:t,type:"primary",shape:"circle",icon:Object(g.jsx)(x.a,{})})]})},columns:k,dataSource:b})};var k=function(){var e=Object(c.useState)([]),r=Object(m.a)(e,2),t=r[0],n=r[1];return Object(c.useEffect)((function(){"granted"!==Notification.permission&&Notification.requestPermission()}),[]),Object(g.jsxs)(b.a,{style:{paddingTop:20},name:"scanForm",labelCol:{span:8},wrapperCol:{span:8},initialValues:{heroName:"Tusk",heroPrice:240,interval:5e3},onFinish:function(e){!t.find((function(r){return r.heroPrice===e.heroPrice&&r.heroName===e.heroName}))?n([].concat(Object(u.a)(t),[e])):j.a.error({message:"Existing"})},autoComplete:"off",children:[Object(g.jsx)(b.a.Item,{label:"Hero Name",name:"heroName",rules:[{required:!0,message:"Please input hero name!"}],children:Object(g.jsx)(d.a,{})}),Object(g.jsx)(b.a.Item,{label:"Hero Price",name:"heroPrice",rules:[{required:!0,message:"Please input hero price!"}],children:Object(g.jsx)(f.a,{min:1})}),Object(g.jsx)(b.a.Item,{label:"Set Interval",name:"interval",rules:[{required:!0,message:"Please input interval!"}],children:Object(g.jsx)(f.a,{min:2e3})}),Object(g.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(g.jsx)(h.a,{type:"primary",htmlType:"submit",children:"Submit"})}),t.map((function(e){return Object(g.jsx)(v,{scanHeroParams:e,onRemoveClick:function(){var r=Object(O.cloneDeep)(t);Object(O.remove)(r,(function(r){return r.heroName===e.heroName&&r.heroPrice===e.heroPrice})),n(r)}},"".concat(e.heroName,"_").concat(e.heroPrice))}))]})},y=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,231)).then((function(r){var t=r.getCLS,c=r.getFID,n=r.getFCP,a=r.getLCP,i=r.getTTFB;t(e),c(e),n(e),a(e),i(e)}))};i.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(k,{})}),document.getElementById("root")),y()}},[[224,1,2]]]);
//# sourceMappingURL=main.027b20b6.chunk.js.map