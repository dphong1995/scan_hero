(this["webpackJsonpscan-hero-react"]=this["webpackJsonpscan-hero-react"]||[]).push([[0],{147:function(e,t,r){},224:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(35),i=r.n(a),s=(r(147),r(114)),o=r.n(s),u=r(119),l=r(131),m=r(120),p=(r(148),r(226)),h=r(138),d=r(227),f=r(136),j=r(228),b=r(52),O=r(115),x=r(29),g=function(e){return"https://market.heroesempires.com/market/".concat(e)},P=function(e){var t=e.scanHeroParams,r=t.heroPrice,c=t.interval,a=t.heroName,i=Object(n.useState)([]),s=Object(m.a)(i,2),h=s[0],d=s[1],f=Object(n.useRef)(),j=Object(n.useCallback)(Object(l.a)(o.a.mark((function e(){var t,n,c,i,s,l,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://marketplace-api.heroesempires.com/sale-items?class&desc=false&listedOnMarket=true&minPrice&orderBy=price&page=1&race&search=".concat(a,"&size=21&tier&maxPrice=").concat(r),{headers:{accept:"application/json, text/plain, */*","accept-language":"en-US,en;q=0.9","cache-control":"no-cache",pragma:"no-cache","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-site","sec-gpc":"1"},referrer:"https://market.heroesempires.com/",referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"omit"});case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,c=n.data.items,i=c[0],c.forEach((function(e){var t=e.sale.price;(!i||t<i.sale.price)&&(i=e)})),i&&!(i.sale.price>r)){e.next=11;break}return e.abrupt("return");case 11:if(l=(s=i).id,m=s.sale.price,!Object(O.find)(h,["id",l])){e.next=15;break}return e.abrupt("return");case 15:new Notification("ScanHero",{body:"".concat(a,": ").concat(m)}).onclick=function(){window.open(g(l))},d(Object(O.uniqBy)([].concat(Object(u.a)(h),[i]),"id"));case 18:case"end":return e.stop()}}),e)}))),[h,d,a,r]),b=Object(n.useMemo)((function(){return[{key:"id",dataIndex:"id",title:"ID",render:function(e){return Object(x.jsx)("a",{href:g(e),children:e})}},{key:"price",dataIndex:["sale","price"],title:"Price"}]}),[]);return Object(n.useEffect)((function(){return f.current&&clearInterval(f.current),f.current=window.setInterval(j,c),function(){clearInterval(f.current)}}),[j,c]),Object(x.jsx)(p.a,{rowKey:"id",title:function(){return Object(x.jsxs)("strong",{children:[a,": ",r]})},columns:b,dataSource:h})};var v=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){"granted"!==Notification.permission&&Notification.requestPermission()}),[]),Object(x.jsxs)(d.a,{style:{paddingTop:20},name:"scanForm",labelCol:{span:8},wrapperCol:{span:8},initialValues:{heroName:"Tusk",heroPrice:240,interval:5e3},onFinish:function(e){!r.find((function(t){return t.heroPrice===e.heroPrice&&t.heroName===e.heroName}))?c([].concat(Object(u.a)(r),[e])):h.a.error({message:"Existing"})},autoComplete:"off",children:[Object(x.jsx)(d.a.Item,{label:"Hero Name",name:"heroName",rules:[{required:!0,message:"Please input hero name!"}],children:Object(x.jsx)(f.a,{})}),Object(x.jsx)(d.a.Item,{label:"Hero Price",name:"heroPrice",rules:[{required:!0,message:"Please input hero price!"}],children:Object(x.jsx)(j.a,{min:1})}),Object(x.jsx)(d.a.Item,{label:"Set Interval",name:"interval",rules:[{required:!0,message:"Please input interval!"}],children:Object(x.jsx)(j.a,{min:2e3})}),Object(x.jsx)(d.a.Item,{wrapperCol:{offset:8,span:16},children:Object(x.jsx)(b.a,{type:"primary",htmlType:"submit",children:"Submit"})}),r.map((function(e){return Object(x.jsx)(P,{scanHeroParams:e},"".concat(e.heroName,"_").concat(e.heroPrice))}))]})},k=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,229)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;r(e),n(e),c(e),a(e),i(e)}))};i.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(v,{})}),document.getElementById("root")),k()}},[[224,1,2]]]);
//# sourceMappingURL=main.901a9d64.chunk.js.map